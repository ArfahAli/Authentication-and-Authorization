{"ast":null,"code":"import _toConsumableArray from\"C:/Users/CUI Atd/Desktop/E-COMMERCE MERN STACK/ClientSide/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/CUI Atd/Desktop/E-COMMERCE MERN STACK/ClientSide/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/CUI Atd/Desktop/E-COMMERCE MERN STACK/ClientSide/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,createContext}from'react';import{useNavigate}from'react-router-dom';import{useMemo}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";export var CartContext=/*#__PURE__*/createContext();export var CartProvider=function CartProvider(_ref){var children=_ref.children;var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cart=_useState2[0],setCart=_useState2[1];var handleRemove=function handleRemove(id){var newCart=cart.filter(function(item){return item.id!==id;});setCart(newCart);};var handleProductClick=function handleProductClick(product){navigate(\"/product/\".concat(product.id),{state:{product:product}});};var addToCart=function addToCart(data){var existingProduct=cart.find(function(item){return item.id===data.id;});if(existingProduct){// Product already exists in the cart, update the quantity\nvar updatedCart=cart.map(function(item){return item.id===data.id?_objectSpread(_objectSpread({},item),{},{quantity:item.quantity+1}):item;});setCart(updatedCart);}else{// Product doesn't exist in the cart, add it with quantity 1\nsetCart([].concat(_toConsumableArray(cart),[_objectSpread(_objectSpread({},data),{},{quantity:1})]));}};var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cartItems=_useState4[0],setCartItems=_useState4[1];useEffect(function(){setCartItems(cart||[]);// Initializing with an empty array if cart is undefined\n},[cart]);var incrementQuantity=function incrementQuantity(cartIndex){setCartItems(function(prevCartItems){return prevCartItems.map(function(item,index){return cartIndex===index?_objectSpread(_objectSpread({},item),{},{quantity:item.quantity+1}):item;});});};var decrementQuantity=function decrementQuantity(cartIndex){setCartItems(function(prevCartItems){return prevCartItems.map(function(item,index){return cartIndex===index&&item.quantity>1?_objectSpread(_objectSpread({},item),{},{quantity:item.quantity-1}):item;});});};var totalPrice=useMemo(function(){return cartItems.reduce(function(total,item){return total+item.price*item.quantity;},0);},[cartItems]);var value={cart:cart,setCart:setCart,handleRemove:handleRemove,addToCart:addToCart,handleProductClick:handleProductClick,decrementQuantity:decrementQuantity,incrementQuantity:incrementQuantity,totalPrice:totalPrice,cartItems:cartItems,setCartItems:setCartItems};return/*#__PURE__*/_jsx(CartContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","useEffect","useState","createContext","useNavigate","useMemo","jsx","_jsx","CartContext","CartProvider","_ref","children","navigate","_useState","_useState2","_slicedToArray","cart","setCart","handleRemove","id","newCart","filter","item","handleProductClick","product","concat","state","addToCart","data","existingProduct","find","updatedCart","map","_objectSpread","quantity","_toConsumableArray","_useState3","_useState4","cartItems","setCartItems","incrementQuantity","cartIndex","prevCartItems","index","decrementQuantity","totalPrice","reduce","total","price","value","Provider"],"sources":["C:/Users/CUI Atd/Desktop/E-COMMERCE MERN STACK/ClientSide/src/pages/Context/cartContext.js"],"sourcesContent":["import React, { useEffect, useState, createContext } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useMemo } from 'react';\r\n\r\nexport const CartContext = createContext();\r\n\r\nexport const CartProvider = ({ children }) => {\r\n\r\n    const navigate = useNavigate();\r\n    const [cart, setCart] = useState([]);\r\n    const handleRemove = (id) => {\r\n        const newCart = cart.filter((item) => item.id !== id);\r\n        setCart(newCart);\r\n      };\r\n\r\n      const handleProductClick = (product) => {\r\n        navigate(`/product/${product.id}`, { state: { product } });\r\n      };\r\n\r\n\r\n  const addToCart = (data) => {\r\n    const existingProduct = cart.find((item) => item.id === data.id);\r\n    if (existingProduct) {\r\n      // Product already exists in the cart, update the quantity\r\n      const updatedCart = cart.map((item) =>\r\n        item.id === data.id ? { ...item, quantity: item.quantity + 1 } : item\r\n      );\r\n      setCart(updatedCart);\r\n    } else {\r\n      // Product doesn't exist in the cart, add it with quantity 1\r\n      setCart([...cart, { ...data, quantity: 1 }]);\r\n    }\r\n  };\r\n\r\n  const [cartItems, setCartItems] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setCartItems(cart || []); // Initializing with an empty array if cart is undefined\r\n  }, [cart]);\r\n\r\n  const incrementQuantity = (cartIndex) => {\r\n    setCartItems((prevCartItems) => {\r\n      return prevCartItems.map((item, index) =>\r\n        cartIndex === index ? { ...item, quantity: item.quantity + 1 } : item\r\n      );\r\n    });\r\n  };\r\n\r\n  const decrementQuantity = (cartIndex) => {\r\n    setCartItems((prevCartItems) => {\r\n      return prevCartItems.map((item, index) =>\r\n        cartIndex === index && item.quantity > 1\r\n          ? { ...item, quantity: item.quantity - 1 }\r\n          : item\r\n      );\r\n    });\r\n  };\r\n\r\n  const totalPrice = useMemo(() => {\r\n    return cartItems.reduce(\r\n      (total, item) => total + item.price * item.quantity,\r\n      0\r\n    );\r\n  }, [cartItems]);\r\n\r\n  const value = { cart, setCart, handleRemove, addToCart,handleProductClick,decrementQuantity,incrementQuantity,totalPrice, cartItems, setCartItems};\r\n\r\n  return <CartContext.Provider value={value}>{children}</CartContext.Provider>;\r\n};\r\n\r\n"],"mappings":"obAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,aAAa,KAAQ,OAAO,CACjE,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,OAAO,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEhC,MAAO,IAAM,CAAAC,WAAW,cAAGL,aAAa,EAAE,CAE1C,MAAO,IAAM,CAAAM,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAAC,IAAA,CAAqB,IAAf,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CAEnC,GAAM,CAAAC,QAAQ,CAAGR,WAAW,EAAE,CAC9B,IAAAS,SAAA,CAAwBX,QAAQ,CAAC,EAAE,CAAC,CAAAY,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IACpB,GAAM,CAAAI,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,EAAE,CAAK,CACzB,GAAM,CAAAC,OAAO,CAAGJ,IAAI,CAACK,MAAM,CAAC,SAACC,IAAI,QAAK,CAAAA,IAAI,CAACH,EAAE,GAAKA,EAAE,GAAC,CACrDF,OAAO,CAACG,OAAO,CAAC,CAClB,CAAC,CAED,GAAM,CAAAG,kBAAkB,CAAG,QAArB,CAAAA,kBAAkBA,CAAIC,OAAO,CAAK,CACtCZ,QAAQ,aAAAa,MAAA,CAAaD,OAAO,CAACL,EAAE,EAAI,CAAEO,KAAK,CAAE,CAAEF,OAAO,CAAPA,OAAQ,CAAE,CAAC,CAAC,CAC5D,CAAC,CAGL,GAAM,CAAAG,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAIC,IAAI,CAAK,CAC1B,GAAM,CAAAC,eAAe,CAAGb,IAAI,CAACc,IAAI,CAAC,SAACR,IAAI,QAAK,CAAAA,IAAI,CAACH,EAAE,GAAKS,IAAI,CAACT,EAAE,GAAC,CAChE,GAAIU,eAAe,CAAE,CACnB;AACA,GAAM,CAAAE,WAAW,CAAGf,IAAI,CAACgB,GAAG,CAAC,SAACV,IAAI,QAChC,CAAAA,IAAI,CAACH,EAAE,GAAKS,IAAI,CAACT,EAAE,CAAAc,aAAA,CAAAA,aAAA,IAAQX,IAAI,MAAEY,QAAQ,CAAEZ,IAAI,CAACY,QAAQ,CAAG,CAAC,GAAKZ,IAAI,GACtE,CACDL,OAAO,CAACc,WAAW,CAAC,CACtB,CAAC,IAAM,CACL;AACAd,OAAO,IAAAQ,MAAA,CAAAU,kBAAA,CAAKnB,IAAI,GAAAiB,aAAA,CAAAA,aAAA,IAAOL,IAAI,MAAEM,QAAQ,CAAE,CAAC,KAAI,CAC9C,CACF,CAAC,CAED,IAAAE,UAAA,CAAkClC,QAAQ,CAAC,EAAE,CAAC,CAAAmC,UAAA,CAAAtB,cAAA,CAAAqB,UAAA,IAAvCE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAE9BpC,SAAS,CAAC,UAAM,CACdsC,YAAY,CAACvB,IAAI,EAAI,EAAE,CAAC,CAAE;AAC5B,CAAC,CAAE,CAACA,IAAI,CAAC,CAAC,CAEV,GAAM,CAAAwB,iBAAiB,CAAG,QAApB,CAAAA,iBAAiBA,CAAIC,SAAS,CAAK,CACvCF,YAAY,CAAC,SAACG,aAAa,CAAK,CAC9B,MAAO,CAAAA,aAAa,CAACV,GAAG,CAAC,SAACV,IAAI,CAAEqB,KAAK,QACnC,CAAAF,SAAS,GAAKE,KAAK,CAAAV,aAAA,CAAAA,aAAA,IAAQX,IAAI,MAAEY,QAAQ,CAAEZ,IAAI,CAACY,QAAQ,CAAG,CAAC,GAAKZ,IAAI,GACtE,CACH,CAAC,CAAC,CACJ,CAAC,CAED,GAAM,CAAAsB,iBAAiB,CAAG,QAApB,CAAAA,iBAAiBA,CAAIH,SAAS,CAAK,CACvCF,YAAY,CAAC,SAACG,aAAa,CAAK,CAC9B,MAAO,CAAAA,aAAa,CAACV,GAAG,CAAC,SAACV,IAAI,CAAEqB,KAAK,QACnC,CAAAF,SAAS,GAAKE,KAAK,EAAIrB,IAAI,CAACY,QAAQ,CAAG,CAAC,CAAAD,aAAA,CAAAA,aAAA,IAC/BX,IAAI,MAAEY,QAAQ,CAAEZ,IAAI,CAACY,QAAQ,CAAG,CAAC,GACtCZ,IAAI,GACT,CACH,CAAC,CAAC,CACJ,CAAC,CAED,GAAM,CAAAuB,UAAU,CAAGxC,OAAO,CAAC,UAAM,CAC/B,MAAO,CAAAiC,SAAS,CAACQ,MAAM,CACrB,SAACC,KAAK,CAAEzB,IAAI,QAAK,CAAAyB,KAAK,CAAGzB,IAAI,CAAC0B,KAAK,CAAG1B,IAAI,CAACY,QAAQ,GACnD,CAAC,CACF,CACH,CAAC,CAAE,CAACI,SAAS,CAAC,CAAC,CAEf,GAAM,CAAAW,KAAK,CAAG,CAAEjC,IAAI,CAAJA,IAAI,CAAEC,OAAO,CAAPA,OAAO,CAAEC,YAAY,CAAZA,YAAY,CAAES,SAAS,CAATA,SAAS,CAACJ,kBAAkB,CAAlBA,kBAAkB,CAACqB,iBAAiB,CAAjBA,iBAAiB,CAACJ,iBAAiB,CAAjBA,iBAAiB,CAACK,UAAU,CAAVA,UAAU,CAAEP,SAAS,CAATA,SAAS,CAAEC,YAAY,CAAZA,YAAY,CAAC,CAElJ,mBAAOhC,IAAA,CAACC,WAAW,CAAC0C,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAAtC,QAAA,CAAEA,QAAQ,EAAwB,CAC9E,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}